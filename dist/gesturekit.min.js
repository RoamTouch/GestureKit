/*! GestureKit v0.0.1 http://gesturekit.com/ | Released under the Apache v2 License. */!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.gesturekit=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(){return this}c.prototype.on=function(a,b,c){return this._eventsCollection=this._eventsCollection||{},b.once=c||!1,void 0===this._eventsCollection[a]&&(this._eventsCollection[a]=[]),this._eventsCollection[a].push(b),this},c.prototype.once=function(a,b){return this.on(a,b,!0),this},c.prototype.off=function(a,b){if(void 0===this._eventsCollection)return this;var c,d=this._eventsCollection[a],e=0;if(void 0!==d)for(c=d.length,e;c>e;e+=1)if(d[e]===b){d.splice(e,1);break}return this},c.prototype.getListeners=function(a){return this._eventsCollection[a]},c.prototype.emit=function(){var a,b,c=Array.prototype.slice.call(arguments,0),d=c.shift(),e=0;if("string"==typeof d&&(d={type:d}),d.target||(d.target=this),void 0!==this._eventsCollection&&void 0!==this._eventsCollection[d.type])for(a=this._eventsCollection[d.type],b=a.length,e;b>e;e+=1)a[e].apply(this,c),a[e].once&&(this.off(d.type,a[e]),b-=1,e-=1);return this},b.exports=c},{}],2:[function(a,b){"use strict";function c(a){var b;for(b in k)a.hasOwnProperty(b)||(a[b]=k[b]);return a}function d(){return this}var e,f=a("./helpers").inherit,g=a("./Emitter"),h=a("./Recognizer"),i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),j=window.document.documentElement,k={sensor:j,enabled:!1,visor:!1,threshold:0},l=!1;f(d,g),d.prototype.init=function(a){return void 0===this.recognizer&&(this.options=c(a||{}),this._threshold=this.options.threshold,this.sensor=this.options.sensor,this._setTouchEvents(),this._enabled=this.options.enabled),this},d.prototype._setTouchEvents=function(){var a=this;return this.recognizer=new h(this.options.uid),this.update=function(){clearTimeout(a._wait),a.recognizer.setPoints(e.touches),a.emit("gesturemotion",e),l=!1},this.captureMotion=function(b){!l&&a._enabled&&(b.preventDefault(),e=b,l=!0,i(a.update))},this.sensor.addEventListener("touchstart",function(b){a._enabled&&(a.recognizer.setPoints(b.touches),a.emit("gesturestart",b))},!1),this.sensor.addEventListener("touchmove",a.captureMotion,!1),this.sensor.addEventListener("touchend",function(b){(l||a._enabled)&&(l=!1,a.wait=setTimeout(function(){a.recognizer.recognizeGesture(),a.emit("gestureend",b)},a._threshold))},!1),this},d.prototype.enable=function(){return this._enabled=!0,this.emit("enable"),this},d.prototype.disable=function(){return this._enabled=!1,this.emit("disable"),this},b.exports=d},{"./Emitter":1,"./Recognizer":3,"./helpers":4}],3:[function(a,b){"use strict";function c(a){return this.uid=a,this.init(),this}var d=a("./pdollar").Pdollar,e=a("./pdollar").Point,f="http://api.gesturekit.com/v1.0/index.php/sdk/getgestures/";c.prototype.init=function(){return this.pointsCollection=[],this.pdollar=new d,this.metadata={},this.loadGestures(),this},c.prototype.loadGestures=function(){var a,b=this,c=new XMLHttpRequest;return c.open("GET",f+this.uid),c.onreadystatechange=function(){c.readyState===c.DONE&&(status=c.status,status>=200&&300>status||304===status||0===status?(a=JSON.parse(c.response||c.responseText),b.addGestures(a.gestureset.gestures),gesturekit.emit("loadgestures",a)):gesturekit.emit("failgestures"))},c.send(),this},c.prototype.addGestures=function(a){var b,c,d,f,g,h=0,i=a.length;for(h;i>h;h+=1){for(c=a[h].method,d=a[h].metadata,""!==d&&null!==d&&void 0===this.metadata[c]&&(this.metadata[c]=d),g=[],f=a[h].gesture,b=0;b<f.length;b+=1)g.push(new e(parseFloat(f[b].X),parseFloat(f[b].Y),f[b].ID));this.pdollar.addGesture(c,g)}return this},c.prototype.setPoints=function(a){var b,c,d,f=0,g=a.length;if(g>0)for(f;g>f;f+=1)b=a[f],c=b.pageX,d=b.pageY,this.pointsCollection.push(new e(c,d,g));return this},c.prototype.recognizeGesture=function(){if(!(this.pointsCollection.length<5)){var a=this.pdollar.recognize(this.pointsCollection);return parseFloat(a.score)>=.1?(gesturekit.emit(a.name,a),gesturekit.emit("recognize",a)):gesturekit.emit("notrecognize"),this.pointsCollection.length=0,console.log("gesture: "+a.name+" score: "+a.score),this}},b.exports=c},{"./pdollar":6}],4:[function(a,b,c){"use strict";c.extend=function(a,b){var c;for(c in b)b[c]&&(a[c]=b[c]);return a},c.inherit=function(a,b){var d=a.prototype||{};return a.prototype=c.extend(d,b.prototype),b.prototype}},{}],5:[function(a,b){"use strict";var c,d=a("./Gesturekit");c=new d,c.version="0.0.1",b.exports=c},{"./Gesturekit":2}],6:[function(a,b){"use strict";function c(a,b,c){this.X=a,this.Y=b,this.ID=c}function d(a,b){var d=0,e=b.length;for(this.name=a,this.points=[],d;e>d;d+=1)this.points.push(new c(b[d].X,b[d].Y,b[d].ID))}function e(){this.pointClouds=[],this.recognize=function(a){a=h(a,o),a=i(a),a=j(a,p);var b,c,d,e,g=0,k=this.pointClouds.length,l={name:r,score:s},m=+1/0,t=-1,u=+1/0,v=-1;for(g;k>g;g+=1)b=f(a,this.pointClouds[g]),m>b?(u=m,v=t,m=b,t=g):u>b&&(u=b,v=g);return-1!==t&&(c=n(a,this.pointClouds[t].points),d=n(a,this.pointClouds[v].points),e=0,c>d?(l.name=this.pointClouds[v].name,e=u):(l.name=this.pointClouds[t].name,e=m),q>e?l.score=Math.max((e-2)/-2,0):l.name=r),l},this.addGesture=function(a,b){this.pointClouds.push(new d(a,b))}}function f(a,b){var c,d,e=.5,f=Math.floor(Math.pow(a.length,1-e)),h=+1/0,i=0,j=a.length;for(i;j>i;i+=f)c=g(a,b.points,i),d=g(b.points,a,i),h=Math.min(h,Math.min(c,d));return h}function g(a,b,c){var d,e,f,g,h,i=0,j=a.length,k=[],l=0,n=c;for(i;j>i;i+=1)k.push(!1);g=k.length;do{for(d=-1,e=+1/0,f=0;g>f;f+=1)if(!k[f]){var o=m(a[n],b[f]);e>o&&(e=o,d=f)}k[d]=!0,h=1-(n-c+j)%j/j,l+=h*e,n=(n+1)%j}while(n!=c);return l}function h(a,b){for(var d=l(a)/(b-1),e=0,f=[a[0]],g=1;g<a.length;g++)if(a[g].ID==a[g-1].ID){var h=m(a[g-1],a[g]);if(e+h>=d){var i=a[g-1].X+(d-e)/h*(a[g].X-a[g-1].X),j=a[g-1].Y+(d-e)/h*(a[g].Y-a[g-1].Y),k=new c(i,j,a[g].ID);f[f.length]=k,a.splice(g,0,k),e=0}else e+=h}return f.length==b-1&&(f[f.length]=new c(a[a.length-1].X,a[a.length-1].Y,a[a.length-1].ID)),f}function i(a){for(var b=+1/0,d=-1/0,e=+1/0,f=-1/0,g=0;g<a.length;g++)b=Math.min(b,a[g].X),e=Math.min(e,a[g].Y),d=Math.max(d,a[g].X),f=Math.max(f,a[g].Y);for(var h=Math.max(d-b,f-e),i=new Array,g=0;g<a.length;g++){var j=(a[g].X-b)/h,k=(a[g].Y-e)/h;i[i.length]=new c(j,k,a[g].ID)}return i}function j(a,b){for(var d=k(a),e=new Array,f=0;f<a.length;f++){var g=a[f].X+b.X-d.X,h=a[f].Y+b.Y-d.Y;e[e.length]=new c(g,h,a[f].ID)}return e}function k(a){for(var b=0,d=0,e=0;e<a.length;e++)b+=a[e].X,d+=a[e].Y;return b/=a.length,d/=a.length,new c(b,d,0)}function l(a){for(var b=0,c=1;c<a.length;c++)a[c].ID==a[c-1].ID&&(b+=m(a[c-1],a[c]));return b}function m(a,b){var c=b.X-a.X,d=b.Y-a.Y;return Math.sqrt(c*c+d*d)}function n(a,b){var c=0,d=0,e=a.length,f=b.length;for(e>f&&(e=f),c;e>c;c+=1)d+=m(a[c],b[c]);return d}var o=32,p=new c(0,0,0),q=1.5,r="No match.",s=0;b.exports.Pdollar=e,b.exports.Point=c},{}]},{},[5])(5)});